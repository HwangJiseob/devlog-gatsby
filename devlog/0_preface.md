#     0. preface

본문에 들어가기 앞서, 개인 블로그를 제작 경위를 적어두려고 합니다. 처음에는 가볍게 쓸 수 있고 가벼운 소셜 기능도 탑재된 **velog**에서 TIL이나 기록해두려고 했습니다. 그런데 점차 개발 공부를 깊게 하게 되고 따로 정리하던 노트들의 수준도 높아지면서 velog만으로는 제가 전달하고자 하는 바를 효과적으로 표현하기가 어렵다는 것을 깨달았습니다. **gist**나 **codepen**, **codesandbox**, **katex**, **youtube** 등의 연동을 지원하지 않고, 블로그 테마가 강제된다는 점도 편하지만 어딘가 마음에 들지 않은 구석이 있었습니다.

블로그 사이트들 중에서 **medium**이 첫번째 한계점에 대해서는 어느 정도 솔루션이 제공되어 있지만, 컨텐츠의 스타일 테마가 강제된다는 건 여전합니다. 블로그 서비스 중에 이런 모든 제약을 벗어나 처음부터 하나하나 커스터마이징을 하려면 **티스토리**가 아마 가장 적절한 대안일 겁니다. 물론 이런 요소들 외에도 **블로그 수익**이나 **SEO**, **학습 비용**이나 **유료 결제**까지 고려하게 되면, 어떤 블로그 서비스를 사용해야할 지 결정하기가 힘듭니다.

하지만 웹 개발자, 그것도 프론트 엔드 개발자라면 자기의 블로그는 자기가 직접 만들어야 하지 않나 싶습니다. 물론 꼭 그럴 필요는 없는데, 블로그를 잘 만들어서 운영한다면 그것만큼 자기의 실력을 잘 보여주는 포트폴리오는 없다고 생각합니다. (아니라면 어쩔 수 없죠.)

문제는 이런 모든 것을 제쳐두고서라도, 마크다운 기반 에디터들은(혹은 웬만한 Rich text editor들에서도) 구조적으로 컨텐츠에 **단을 나눌 수가 없습니다.** 이 의미를 조금 더 확장하자면, **Microsoft Word**나 **한글2020**와 같은 강력한 Document Formatting 기능들이 지원되지 않는다는 겁니다. 엇필 들으면 블로그를 작성하는 데 굳이 단을 나눌 필요가 있냐 싶겠지만, **두 언어를 비교하는 포스팅**에서 각 언어의 기능 구현을 차례대로 배치하는 것은 굉장히 전달력이 떨어진다고 생각했습니다. 그 외에 동적인 진행 결과를 슬라이드 방식으로 보여주고 싶은데 이를 구현하려면 **slideshare** 외에는 답이 없었습니다.

그래서 이를 어떻게 해결할까 고민하다가 **slate.js**라는 커스터마이징이 용이한 에디터를 개조해볼까 생각했습니다. 그때까지만해도 블로그 포스트 작성과 조회를 블로그 사이트에서 동시에 가능하게 만들려고 했기 때문입니다. 하지만 에디터를 개조한다는 것, 자세히 말하면 문서의 스키마를 개조한다는 것은 상상 이상으로 어려운 작업이었습니다. 새로운 데이터 모델을, 그것도 단이나 슬라이드 같은 2차원 객체들은 삽입, 삭제, 수정 로직을 짤 때 기존의 모델들보다 고려해야할 사항들이 훨씬 많았습니다. 때문에 개인 용도로 에디터를 만든다는 것은 그냥 미친 짓이었습니다.

그렇게 새로운 에디터와 문서 모델을 포기하고 이리저리 떠돌던 와중에 저는 **storybook**을 통해 **MDX**라는 걸 알게 되었습니다. 처음에는 이게 뭔가 싶어서 넘겼다가 **gatsby**를 알게 되면서 **MDX**의 어마어마한 확장 가능성에 주목했습니다. gatsby 프로젝트에 MDX 플러그인을 설치하고 이리저리 테스트해본 끝에 저는 MDX로 제가 원하는 거의 모든 수준의 문서 모델을 구현할 수 있다는 것을 느끼고 바로 블로그 계획을 짰습니다.

하지만 예상 밖의 암초가 있었습니다.

##    gatsby vs next.js
gatsby는 정적 사이트 생성기인 반면 next.js는 ssr 프레임워크입니다.(물론 next.js도 ssg를 지원합니다.) 두 프레임워크 모두 production build를 출력하지만, 구조저그올 가장 큰 차이점은 바로 dynamic routing에 있습니다. next.js는 백엔드 로직이 동작하기 때문에 dynamic routing의 fallback을 굉장히 여유롭게 처리할 수 있지만, gatsby에서 이를 구현하려면 csr을 써야만 하며 `curly bracket syntax`가 아니라 `square bracket syntax`를 쓰는 경우 사실상 fallback이 존재하지 않게 됩니다. (정확하게 말하면 프론트에서 path와 parameter를 확인하여 redirect나 404 rendering 로직을 추가해야 합니다.) 그 외에도 블로그의 인기 포스트 순위 집계, 포스트 검색, 태그 기능들은 next가 gatsby보다 훨씬 강력할 수밖에 없습니다.

하지만 그럼에도 저는 이번 블로그는 gatsby로 구현하기로 했습니다. 아직 서버나 DB 쪽 지식이 많이 부족하기 때문에 next로 블로그를 만들면 아무래도 포스팅을 할 수 있는 시기가 더 늦어질 것 같습니다. 그리고 뭐든 최선의 결과를 내려는 것보다는, 한 번 정도 경험을 거치는 게 좋다고 생각했습니다. 그래서 이번 블로그는 gatsby로 구현하되, 나중에 블로그 이사를 위한 사전작업을 좀 해두려고 합니다.

처음에는 gatsby + strapi로 가려고 했는데, 정적 생성 기능을 사용할 거면 굳이 strapi가 필요하진 않았습니다. 사실 next로 이사하기 편하려면 strapi에 데이터를 넣어두는 게 좋기는 한데, 그때 가서도 제가 strapi를 쓸지 모르기 때문에 프로젝트 디렉토리 안에 MDX 파일로 보관하기로 결정했습니다. 임시 블로그다보니 글이 많지는 않을 것 같아서요.

아마 다음에 next js로 만든 블로그에서는 ssg와 ssr에 대해 좀 더 심도 있는 분석글을 올리지 않을까 싶습니다.

##    outro
이 블로그는 개발 목적이 목적인 만큼 TIL 같은 거는 **velog**에도 같이 올릴 생각입니다.